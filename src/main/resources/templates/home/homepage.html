<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ỨNG DỤNG QUẢN LÝ SÁCH</title>
    <th:block th:replace="layout :: link-css"></th:block> </head>
</head>
<body>
<th:block th:replace="layout :: header"></th:block>


    <div class="container">

            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    TRANG CHỦ ỨNG DỤNG QUẢN LÝ SÁCH
                </a>
                <div class="container mt-5">
                    <div class="custom-file">
                        <input type="file" class="custom-file-label btn btn-primary" accept="image/*" id="image-input">
<!--                        <label class="custom-file-label btn btn-primary" for="image-input">Choose file</label>-->
                    </div>

                    <img id="image-preview" class="img-thumbnail" width="100" height="100">
                </div>
                <button class="btn btn-primary mt-3" id="upload-button">Upload Image</button>
                <script>
                    // Get references to the HTML elements
                    const imageInput = document.querySelector('#image-input');
                    const imagePreview = document.querySelector('#image-preview');
                    const uploadButton = document.querySelector('#upload-button');

                    // When the user selects an image, display a preview of the image
                    imageInput.addEventListener('change', () => {
                        const file = imageInput.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = () => {
                                imagePreview.src = reader.result;
                            };
                            reader.readAsDataURL(file);
                        }
                    });

                    // When the user clicks the upload button, send the image to the server
                    uploadButton.addEventListener('click', () => {
                        const file = imageInput.files[0];
                        if (file) {
                            const formData = new FormData();
                            formData.append('image', file);
                            formData.append('userInfo', 'user_info'); // Replace 'user_info' with the actual user info

                            fetch('/uploadImage', {
                                method: 'POST',
                                body: formData
                            })
                                .then(response => response.json())
                                .then(data => {
                                    // Display the download URL of the uploaded file
                                    alert(`Download URL: ${data.downloadUrl}`);
                                })
                                .catch(error => {
                                    // Display an error message
                                    alert(`Error: ${error.message}`);
                                });
                        }
                    });
                </script>
            </div>

    </div>


<th:block th:replace="layout :: footer"></th:block>
</body>
</html>